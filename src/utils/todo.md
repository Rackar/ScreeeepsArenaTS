# todo list
## 优先开发目标

- [x] 发现bug。ClassUnit的第二次生产时不会触发任务序列初始化，因为已经init过了。将执行序列放置外层，方便判断角色死亡清空和重新初始化。搞定

CAC FAME得key。
一个近战骚扰，一个小c去抢运，然后一小队防守矿池，一小队巡逻野外，一个远程兵守家

在任务序列stop function中，敌人必须得重新获取，因为没有初始化内存地址，不能随对象生成而更新。自己方可以直接取目前是因为有一层造兵时的封装和初始化。

先加一个分矿运营和防守逻辑，然后优化场面监控，发现对方在大场地集结还是个别骚扰，准备中间霸场。如果移动中遇到敌方集结部队，计算是否要开战或者撤退。

分数矿附近建地堡，一个远程进去防守

移动过程中只有路过射击，需要增加判断是否有地方部队接战，需要展开战斗或者逃跑。

分数挖矿存在目标被己方其他工人搬空，导致个别卡死

## 其他优化计划
### UI方面
增加敌我单位数量和血条指示，增加攻击和移动目标线条。

### 通用战斗模块方面
继续抽取公共部分，提炼各模式可用的纯函数

### CAS 基础模式
重点编写抽取敌方矿，开二矿并防御，游走骚扰农民等策略，尽早拿到红色进阶key

### SAS 基础模式
偷家策略需优化，需要果断偷塔。

### SAS 高级模式
防TR


## 开发记录

 1.暴兵流 A4M4 H3M3
 2.风筝流 R3M4 H2M4
 3.别人的铁三角 M5A1T2*1 M5R4*2 M5H3*2

  改阵型，防御后攻。或者铁三角坦克治疗暴远程

 需要两个改进。造塔第一步总失败，貌似是地点被占用问题
 第二 弓兵需要hit and run

 需要新改进。提升弓箭质量，考虑第二梯队用铁三角，去除塔防；战斗中优先攻击治疗；
 放弃坦克，第二梯队用远程加医疗，游走消耗，同时去掉塔防.
 下一个优化，如果太多弓箭瞄准同一目标，则切换为其他目标

 集火治疗没生效。需要安排一个偷塔策略：
 对第n个弓箭手，记录下他的id编号，单独开发偷塔策略
 检查战局僵持，如果僵持，则偷塔
 检查敌人所在平均半区，是否在某个半区没有敌人的战斗单位
 指定空半区做为中间路点，走过去暂停
 检查敌人基地位置附近战斗单位数量，如果为1及以下，则直接到达基地进行偷塔
 路上监测是否被攻击掉血，如掉血则放弃偷塔

 战斗优化，掉血过半周围有自己人，则后撤几步再上
 小心被单兵引走攻击

 遇到了世界第一，记录策略。2个carryer。然后一个M5W1C1 carryer去一个Container 提取能量扔地上作为resource 然后建Extention。攻击者M15A3*2去守另一个Container。再加一个M102H医疗。

 需要偷塔监测
 当前问题 234行风筝容易超时。215、218、219、227行寻路容易超时。改为range遍历，提高性能
 治疗优先级

 对方近战原地暴兵，阵型可能会没法展开

 策略分类：地堡流，偷塔流，骚扰流，远程型，重坦近战流，快速流

 首先测试快速提矿进行extention建造，对经济的影响

 需要单独游走 消灭挖矿或者保护我方挖矿

 检测中间采矿区域是否有地方战斗单位数量小于2，检测是否有carry单位，使用最快近战单位去追击，如果被攻击则绕行

 越向下策略权重越高，覆盖前一级策略
 单体级策略（攻击范围内的敌人，治疗范围内的己方单位，攻击与治疗的优先级，正常逃生和集火）
 团队级策略（快速移动，成队形移动，猛攻，偷袭，驻守，护送，躲避）
 团队级阶段切换（满足什么条件切换阶段目标，目标位置或固定地点，本阶段所用策略）
 战略级策略切换（强制修改团队策略及阶段切换方式）
 单体级特殊阶段切换（特殊目标，满足什么条件切换阶段目标并忽略团队目标，本阶段行动策略）

 队伍生产配置
 配置单位类型，数量，顺序，团队名，各级策略配置
